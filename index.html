<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>NEON CLOCK</title>

<!-- PWA meta -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00c8ff">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Clock">
<meta name="application-name" content="NEON CLOCK">
<meta name="description" content="A modern dark-theme 12-hour clock">

<!-- Apple touch icons -->
<link rel="apple-touch-icon" href="icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="96x96" href="icons/icon-96x96.png">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@300;400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #080c10;
    --border: rgba(0, 200, 255, 0.12);
    --accent: #00c8ff;
    --accent2: #ff3e6c;
    --glow: rgba(0, 200, 255, 0.35);
    --text-primary: #e8f4ff;
    --text-muted: rgba(200, 230, 255, 0.45);
    --clock-size: min(240px, 65vw);
  }

  html { height: 100%; }

  body {
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    min-height: 100dvh;
    font-family: 'Orbitron', monospace;
    overflow-x: hidden;
    overflow-y: auto;
    padding: 24px 16px;
    /* iOS safe area */
    padding-top: max(24px, env(safe-area-inset-top));
    padding-bottom: max(24px, env(safe-area-inset-bottom));
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,200,255,0.025) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,200,255,0.025) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: gridShift 20s linear infinite;
    z-index: 0;
    pointer-events: none;
  }
  @keyframes gridShift { to { transform: translate(60px,60px); } }

  .orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(80px);
    z-index: 0;
    pointer-events: none;
    animation: pulse 8s ease-in-out infinite alternate;
  }
  .orb-1 { width:min(500px,120vw); height:min(500px,120vw); background:var(--accent);  opacity:.08; top:-30%;    left:-20%; }
  .orb-2 { width:min(400px,100vw); height:min(400px,100vw); background:var(--accent2); opacity:.08; bottom:-20%; right:-20%; animation-delay:3s; }
  @keyframes pulse {
    from { opacity:.05; transform:scale(1); }
    to   { opacity:.15; transform:scale(1.15); }
  }

  /* Offline banner */
  #offline-banner {
    position: fixed;
    top: max(8px, env(safe-area-inset-top));
    left: 50%; transform: translateX(-50%);
    background: rgba(255,62,108,0.15);
    border: 1px solid rgba(255,62,108,0.4);
    color: #ff3e6c;
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    padding: 6px 16px;
    border-radius: 20px;
    z-index: 100;
    display: none;
    white-space: nowrap;
  }
  #offline-banner.show { display: block; }

  /* Install prompt */
  #install-btn {
    position: fixed;
    bottom: max(20px, env(safe-area-inset-bottom, 20px));
    left: 50%; transform: translateX(-50%);
    background: rgba(0,200,255,0.1);
    border: 1px solid rgba(0,200,255,0.3);
    color: var(--accent);
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    padding: 8px 20px;
    border-radius: 20px;
    cursor: pointer;
    z-index: 100;
    display: none;
    white-space: nowrap;
    transition: background .2s, border-color .2s;
  }
  #install-btn:hover { background: rgba(0,200,255,0.2); border-color: rgba(0,200,255,0.6); }
  #install-btn.show { display: block; }

  /* ── Main layout ── */
  .clock-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(14px, 4vw, 28px);
    width: 100%;
    max-width: 400px;
  }

  /* ── Analog face ── */
  .analog-clock {
    width: var(--clock-size);
    height: var(--clock-size);
    flex-shrink: 0;
    position: relative;
  }
  .analog-face {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(ellipse at 30% 30%, #141e2a, #080c10);
    border: 1px solid var(--border);
    box-shadow:
      0 0 0 1px rgba(0,200,255,0.05),
      0 0 40px rgba(0,200,255,0.1),
      inset 0 0 30px rgba(0,0,0,0.6);
    position: relative;
    overflow: hidden;
  }
  .analog-face::after {
    content: '';
    position: absolute;
    inset: 5%;
    border-radius: 50%;
    border: 1px solid rgba(0,200,255,0.06);
  }
  .clock-svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }
  .hour-num {
    position: absolute;
    font-family: 'Space Mono', monospace;
    font-size: clamp(7px, 2vw, 10px);
    color: var(--text-muted);
    width: 20px; height: 20px;
    display: flex; align-items: center; justify-content: center;
    transform: translate(-50%,-50%);
    z-index: 2;
  }
  .hand {
    position: absolute;
    bottom: 50%; left: 50%;
    transform-origin: bottom center;
    border-radius: 4px;
    z-index: 3;
  }
  .hand-hour {
    width:4px; height:28%;
    background: linear-gradient(to top, var(--accent), rgba(0,200,255,0.4));
    margin-left:-2px;
    box-shadow: 0 0 10px var(--accent);
    border-radius: 4px 4px 2px 2px;
    transition: transform .5s cubic-bezier(.4,2.08,.55,.44);
  }
  .hand-minute {
    width:2.5px; height:37%;
    background: linear-gradient(to top, #fff, rgba(255,255,255,0.3));
    margin-left:-1.25px;
    box-shadow: 0 0 8px rgba(255,255,255,.5);
    border-radius: 3px 3px 2px 2px;
    transition: transform .5s cubic-bezier(.4,2.08,.55,.44);
  }
  .hand-second {
    width:1.5px; height:40%;
    background: linear-gradient(to top, var(--accent2), rgba(255,62,108,0.3));
    margin-left:-.75px; margin-bottom:-6%;
    box-shadow: 0 0 10px var(--accent2);
    border-radius: 2px;
    transition: transform .1s linear;
  }
  .center-dot {
    position: absolute;
    top:50%; left:50%;
    transform: translate(-50%,-50%);
    width:clamp(8px,2.5vw,12px); height:clamp(8px,2.5vw,12px);
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 12px var(--accent);
    z-index: 10;
  }

  /* ── Digital ── */
  .digital-section { text-align: center; }
  .digital-time {
    font-size: clamp(48px, 15vw, 84px);
    font-weight: 700;
    letter-spacing: clamp(2px,1vw,4px);
    color: var(--text-primary);
    text-shadow: 0 0 20px var(--glow), 0 0 60px rgba(0,200,255,.15);
    line-height: 1;
    font-variant-numeric: tabular-nums;
  }
  .colon {
    color: var(--accent);
    animation: blink 1s step-end infinite;
    text-shadow: 0 0 20px var(--accent);
  }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.15} }
  .ampm-seconds {
    display: flex; align-items: center; justify-content: center;
    gap: clamp(10px,3vw,20px);
    margin-top: 6px;
  }
  .ampm {
    font-family: 'Space Mono', monospace;
    font-size: clamp(10px,3vw,13px);
    font-weight: 700; letter-spacing: 3px;
    color: var(--accent);
    background: rgba(0,200,255,.08);
    border: 1px solid rgba(0,200,255,.2);
    padding: 3px 10px; border-radius: 4px;
    text-shadow: 0 0 10px var(--accent);
  }
  .seconds-display {
    font-family: 'Space Mono', monospace;
    font-size: clamp(10px,3vw,13px);
    color: var(--text-muted); letter-spacing: 2px;
  }
  .seconds-display span { color:var(--accent2); text-shadow:0 0 8px var(--accent2); }

  /* ── Divider ── */
  .divider {
    width:100%; max-width:280px; height:1px;
    background: linear-gradient(90deg, transparent, var(--border), rgba(0,200,255,.2), var(--border), transparent);
  }

  /* ── Date ── */
  .date-section { text-align:center; display:flex; flex-direction:column; gap:5px; }
  .date-day  { font-size:clamp(9px,2.5vw,11px); letter-spacing:clamp(3px,1.5vw,6px); color:var(--text-muted); text-transform:uppercase; }
  .date-full { font-family:'Space Mono',monospace; font-size:clamp(15px,4.5vw,18px); font-weight:700; color:var(--text-primary); letter-spacing:2px; }
  .date-year { font-size:clamp(9px,2.5vw,11px); letter-spacing:clamp(3px,1.2vw,5px); color:var(--accent); }

  /* ── Progress bar ── */
  .progress-bar-wrapper {
    width:var(--clock-size); height:3px;
    background:rgba(255,255,255,.05);
    border-radius:10px; overflow:hidden;
  }
  .progress-bar {
    height:100%;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    border-radius:10px;
    box-shadow:0 0 8px var(--accent);
    transition:width .9s linear;
  }

  /* ── Tiny phones ── */
  @media (max-width:340px) { :root { --clock-size:75vw; } }

  /* ── Landscape phones ── */
  @media (max-height:520px) and (orientation:landscape) {
    :root { --clock-size:min(180px,40vh); }
    body { padding:12px; }
    .clock-wrapper {
      flex-direction:row; align-items:center; justify-content:center;
      flex-wrap:wrap; gap:12px 32px; max-width:720px;
    }
    .right-col { display:flex!important; flex-direction:column; align-items:center; gap:10px; }
    .progress-bar-wrapper { width:180px; }
    .divider { max-width:200px; }
  }
</style>
</head>
<body>

<div id="offline-banner">⚡ OFFLINE MODE</div>
<button id="install-btn">⬇ ADD TO HOME SCREEN</button>

<div class="orb orb-1"></div>
<div class="orb orb-2"></div>

<div class="clock-wrapper">

  <div class="analog-clock">
    <div class="analog-face" id="face">
      <svg class="clock-svg" id="clockSvg" viewBox="0 0 240 240"></svg>
      <div class="hand hand-hour"   id="hourHand"></div>
      <div class="hand hand-minute" id="minuteHand"></div>
      <div class="hand hand-second" id="secondHand"></div>
      <div class="center-dot"></div>
    </div>
  </div>

  <div class="right-col" style="display:contents">

    <div class="digital-section">
      <div class="digital-time">
        <span id="dHours">12</span><span class="colon">:</span><span id="dMinutes">00</span>
      </div>
      <div class="ampm-seconds">
        <div class="ampm" id="ampm">AM</div>
        <div class="seconds-display">SS&nbsp;<span id="dSeconds">00</span></div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="date-section">
      <div class="date-day"  id="dayName">WEDNESDAY</div>
      <div class="date-full" id="dateFull">FEB 25</div>
      <div class="date-year" id="dateYear">2026</div>
    </div>

    <div class="progress-bar-wrapper">
      <div class="progress-bar" id="progressBar"></div>
    </div>

  </div>
</div>

<script>
  /* ── Clock SVG setup ── */
  const svg  = document.getElementById('clockSvg');
  const face = document.getElementById('face');
  const NS = 'http://www.w3.org/2000/svg';
  const cx = 120, cy = 120, r = 104;

  const defs = document.createElementNS(NS, 'defs');
  defs.innerHTML = `
    <filter id="glow" x="-60%" y="-60%" width="220%" height="220%">
      <feGaussianBlur stdDeviation="1.8" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>`;
  svg.appendChild(defs);

  for (let i = 0; i < 60; i++) {
    const a = (i / 60) * 2 * Math.PI - Math.PI / 2;
    const major = i % 5 === 0;
    const inner = r - (major ? 12 : 6);
    const line = document.createElementNS(NS, 'line');
    line.setAttribute('x1', cx + r * Math.cos(a));
    line.setAttribute('y1', cy + r * Math.sin(a));
    line.setAttribute('x2', cx + inner * Math.cos(a));
    line.setAttribute('y2', cy + inner * Math.sin(a));
    line.setAttribute('stroke', major ? 'rgba(0,200,255,0.6)' : 'rgba(0,200,255,0.2)');
    line.setAttribute('stroke-width', major ? '2' : '1');
    if (major) line.setAttribute('filter', 'url(#glow)');
    svg.appendChild(line);
  }

  for (let h = 1; h <= 12; h++) {
    const a = (h / 12) * 2 * Math.PI - Math.PI / 2;
    const nr = 82;
    const el = document.createElement('div');
    el.className = 'hour-num';
    el.style.left = ((cx + nr * Math.cos(a)) / 240 * 100).toFixed(2) + '%';
    el.style.top  = ((cy + nr * Math.sin(a)) / 240 * 100).toFixed(2) + '%';
    el.textContent = h;
    face.appendChild(el);
  }

  /* ── Layout ── */
  function applyLayout() {
    const landscape = window.innerHeight < 520 && window.innerWidth > window.innerHeight;
    const rc = document.querySelector('.right-col');
    rc.style.display = landscape ? 'flex' : 'contents';
    if (landscape) { rc.style.flexDirection='column'; rc.style.alignItems='center'; rc.style.gap='10px'; }
  }
  applyLayout();
  window.addEventListener('resize', applyLayout);

  /* ── Clock update ── */
  const monthsShort = ['JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC'];
  const dayNames    = ['SUNDAY','MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY'];
  const pad = n => String(n).padStart(2,'0');

  function update() {
    const now = new Date();
    const h24=now.getHours(), m=now.getMinutes(), s=now.getSeconds(), ms=now.getMilliseconds();

    document.getElementById('secondHand').style.transform = `rotate(${(s/60)*360+(ms/1000)*6}deg)`;
    document.getElementById('minuteHand').style.transform = `rotate(${(m/60)*360+(s/60)*6}deg)`;
    document.getElementById('hourHand').style.transform   = `rotate(${((h24%12)/12)*360+(m/60)*30}deg)`;

    const h12 = h24 % 12 || 12;
    document.getElementById('dHours').textContent   = pad(h12);
    document.getElementById('dMinutes').textContent = pad(m);
    document.getElementById('dSeconds').textContent = pad(s);
    document.getElementById('ampm').textContent     = h24 < 12 ? 'AM' : 'PM';
    document.getElementById('dayName').textContent  = dayNames[now.getDay()];
    document.getElementById('dateFull').textContent = monthsShort[now.getMonth()] + ' ' + pad(now.getDate());
    document.getElementById('dateYear').textContent = now.getFullYear();
    document.getElementById('progressBar').style.width = ((s/59)*100) + '%';
  }
  update();
  setInterval(update, 100);

  /* ── Service Worker registration ── */
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').then(reg => {
      console.log('SW registered:', reg.scope);
    }).catch(err => console.warn('SW registration failed:', err));
  }

  /* ── Offline banner ── */
  const banner = document.getElementById('offline-banner');
  function syncOnline() { banner.classList.toggle('show', !navigator.onLine); }
  syncOnline();
  window.addEventListener('online',  syncOnline);
  window.addEventListener('offline', syncOnline);

  /* ── Install prompt ── */
  let deferredPrompt = null;
  const installBtn = document.getElementById('install-btn');

  window.addEventListener('beforeinstallprompt', e => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.classList.add('show');
  });

  installBtn.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') installBtn.classList.remove('show');
    deferredPrompt = null;
  });

  window.addEventListener('appinstalled', () => {
    installBtn.classList.remove('show');
    deferredPrompt = null;
  });
</script>
</body>
</html>
